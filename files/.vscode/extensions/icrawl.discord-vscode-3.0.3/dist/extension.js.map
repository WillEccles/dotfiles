{"version":3,"sources":["extension.ts"],"names":[],"mappings":"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","file":"extension.js","sourcesContent":["import {\n\tcommands,\n\tExtensionContext,\n\tStatusBarAlignment,\n\tStatusBarItem,\n\twindow,\n\tworkspace\n} from 'vscode';\nimport RPCClient from './client/RPCClient';\nimport Logger from './structures/Logger';\n\nconst statusBarIcon: StatusBarItem = window.createStatusBarItem(StatusBarAlignment.Left);\nstatusBarIcon.text = '$(pulse) Connecting...';\nstatusBarIcon.command = 'discord.reconnect';\n\nconst config = workspace.getConfiguration('discord');\nconst rpc = new RPCClient(config.get<string>('clientID')!, statusBarIcon);\n\nexport async function activate(context: ExtensionContext) {\n\tLogger.log('Discord Presence activated!');\n\n\tif (config.get<boolean>('enabled')) {\n\t\tstatusBarIcon.show();\n\t\ttry {\n\t\t\tawait rpc.login();\n\t\t} catch (error) {\n\t\t\tLogger.log(`Encountered following error after trying to login:\\n${error}`);\n\t\t\tif (!config.get('silent')) {\n\t\t\t\tif (error.message.includes('ENOENT')) window.showErrorMessage('No Discord Client detected!');\n\t\t\t\telse window.showErrorMessage(`Couldn't connect to Discord via RPC: ${error.toString()}`);\n\t\t\t}\n\t\t\trpc.statusBarIcon.text = '$(pulse) Reconnect';\n\t\t\trpc.statusBarIcon.command = 'discord.reconnect';\n\t\t\trpc.statusBarIcon.show();\n\t\t}\n\t}\n\n\tconst enabler = commands.registerCommand('discord.enable', async () => {\n\t\tawait rpc.dispose();\n\t\tawait config.update('enabled', true);\n\t\trpc.config = workspace.getConfiguration('discord');\n\t\trpc.statusBarIcon.text = '$(pulse) Connecting...';\n\t\trpc.statusBarIcon.show();\n\t\tawait rpc.login();\n\t\twindow.showInformationMessage('Enabled Discord Rich Presence for this workspace.');\n\t});\n\n\tconst disabler = commands.registerCommand('discord.disable', async () => {\n\t\tawait config.update('enabled', false);\n\t\trpc.config = workspace.getConfiguration('discord');\n\t\tawait rpc.dispose();\n\t\twindow.showInformationMessage('Disabled Discord Rich Presence for this workspace.');\n\t});\n\n\tconst reconnecter = commands.registerCommand('discord.reconnect', async () => {\n\t\tawait rpc.dispose();\n\t\tawait rpc.login();\n\t\tif (!config.get('silent')) window.showInformationMessage('Reconnecting to Discord RPC...');\n\t\trpc.statusBarIcon.text = '$(pulse) Reconnecting...';\n\t\trpc.statusBarIcon.command = undefined;\n\t});\n\n\tcontext.subscriptions.push(enabler, disabler, reconnecter);\n}\n\nexport async function deactivate() {\n\tawait rpc.dispose();\n}\n\nprocess.on('unhandledRejection', err => Logger.log(err));\n"],"sourceRoot":"../src"}